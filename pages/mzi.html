
<!DOCTYPE html>

<html data-content_root="" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>Mach-Zehnder interferometers — CamachoLab Photonics Bootcamp</title>
<script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
<!-- Loaded before other Sphinx assets -->
<link href="../_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet"/>
<link href="../_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet"/>
<link href="../_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet"/>
<link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" rel="preload" type="font/woff2"/>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" rel="stylesheet" type="text/css"/>
<link href="../_static/togglebutton.css" rel="stylesheet" type="text/css"/>
<link href="../_static/copybutton.css" rel="stylesheet" type="text/css"/>
<link href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" rel="stylesheet" type="text/css"/>
<link href="../_static/sphinx-thebe.css" rel="stylesheet" type="text/css"/>
<link href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" rel="stylesheet" type="text/css"/>
<!-- Pre-loaded scripts that we'll load fully later -->
<link as="script" href="../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" rel="preload"/>
<link as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" rel="preload"/>
<script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>
<script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
<script src="../_static/jquery.js"></script>
<script src="../_static/underscore.js"></script>
<script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="../_static/doctools.js"></script>
<script src="../_static/clipboard.min.js"></script>
<script src="../_static/copybutton.js"></script>
<script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
<script>let toggleHintShow = 'Click to show';</script>
<script>let toggleHintHide = 'Click to hide';</script>
<script>let toggleOpenOnPrint = 'true';</script>
<script src="../_static/togglebutton.js"></script>
<script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
<script src="../_static/design-tabs.js"></script>
<script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
<script async="async" src="../_static/sphinx-thebe.js"></script>
<script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
<script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>DOCUMENTATION_OPTIONS.pagename = 'pages/mzi';</script>
<link href="https://byucamacholab.github.io/Photonics-Bootcamp/pages/mzi.html" rel="canonical"/>
<link href="../_static/favicon-laser.svg" rel="shortcut icon"/>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="advanced_components.html" rel="next" title="Advanced Components"/>
<link href="pdks.html" rel="prev" title="Process design kits"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
<link href="../_static/styles/chattutor.style.css" rel="stylesheet" type="text/css"/></head>
<body data-bs-root-margin="0px 0px -60%" data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-default-mode="" data-offset="180">
<a class="skip-link" href="#main-content" id="pst-skip-link">Skip to main content</a>
<div id="pst-scroll-pixel-helper"></div>
<button class="btn rounded-pill" id="pst-back-to-top" type="button">
<i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>
<input class="sidebar-toggle" id="__primary" name="__primary" type="checkbox"/>
<label class="overlay overlay-primary" for="__primary"></label>
<input class="sidebar-toggle" id="__secondary" name="__secondary" type="checkbox"/>
<label class="overlay overlay-secondary" for="__secondary"></label>
<div class="search-button__wrapper">
<div class="search-button__overlay"></div>
<div class="search-button__search-container">
<form action="../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="fa-solid fa-magnifying-glass"></i>
<input aria-label="Search this book..." autocapitalize="off" autocomplete="off" autocorrect="off" class="form-control" id="search-input" name="q" placeholder="Search this book..." spellcheck="false" type="search"/>
<span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
</div>
<header>
<div class="bd-header navbar navbar-expand-lg bd-navbar">
</div>
</header>
<div class="bd-container">
<div class="bd-container__inner bd-page-width">
<div class="bd-sidebar-primary bd-sidebar">
<div class="sidebar-header-items sidebar-primary__section">
</div>
<div class="sidebar-primary-items__start sidebar-primary__section">
<div class="sidebar-primary-item">
<a class="navbar-brand logo" href="../index.html">
<img alt="CamachoLab Photonics Bootcamp - Home" class="logo__image only-light" src="../_static/logo.png"/>
<script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="CamachoLab Photonics Bootcamp - Home"/>`);</script>
</a></div>
<div class="sidebar-primary-item"><nav aria-label="Main" class="bd-links" id="bd-docs-nav">
<div class="bd-toc-item navbar-nav active">
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Front Matter</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Development Environment</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="open_source.html">Open source software</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="software.html">Software</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="git_and_github.html">Git (and GitHub)</a></li>
<li class="toctree-l2"><a class="reference internal" href="vscode.html">Visual Studio Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="klayout.html">KLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="laboratory_tools.html">Laboratory Tools</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Passive Device Design and Simulation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="photonic_devices.html">What are photonic devices?</a></li>
<li class="toctree-l1"><a class="reference internal" href="layer_stack.html">Defining the layer stack</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="components.html">Components</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="gds_to_meep.html">GDS to Meep</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="waveguides.html">Waveguides</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="waveguides_tir.html">Total Internal Reflection</a></li>
<li class="toctree-l2"><a class="reference internal" href="waveguides_polarization.html">Polarization</a></li>
<li class="toctree-l2"><a class="reference internal" href="ray_optic_model.html">Improving the Ray-optic Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="waveguides_mode_solvers.html">Waveguide modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="waveguides_modelling.html">Modelling Wavegudies</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="passive_components.html">Passive components</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="directional_couplers.html">Directional couplers</a></li>
<li class="toctree-l2"><a class="reference internal" href="y_branch.html">Y-Branches</a></li>
<li class="toctree-l2"><a class="reference internal" href="ring_resonators.html">Ring Resonators</a></li>
<li class="toctree-l2"><a class="reference internal" href="mmis.html">Multimode Interferometers (MMIs)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="optical_io.html">Optical I/O</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="grating_couplers.html">Grating couplers</a></li>
<li class="toctree-l2"><a class="reference internal" href="edge_couplers.html">Edge couplers</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="optimization.html">Optimization and inverse design</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="shape_optimization.html">Shape optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="adjoint_optimization.html">Adjoint optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="meep_to_gds.html">Meep to GDS</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="compact_models.html">Compact models</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="scattering_parameters.html">Scattering parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="drc.html">Design rule checks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Circuit Design and Simulation</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="pdks.html">Process design kits</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Mach-Zehnder interferometers</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Active Device Design and Simulation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="advanced_components.html">Advanced Components</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="phase_shifters.html">Phase Shifters</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="phase_shifters_heaters.html">Heaters</a></li>
<li class="toctree-l2"><a class="reference internal" href="phase_shifters_pn.html">PN and PIN Junctions</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Testing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="analyzing_circuits.html">Analyzing circuits</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">References</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/BYUCamachoLab/sky130ph">Repository</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/BYUCamachoLab/sky130ph/docs">PDK Documentation</a></li>
</ul>
</div>
</nav></div>
</div>
<div class="sidebar-primary-items__end sidebar-primary__section">
</div>
<div id="rtd-footer-container"></div>
</div>
<main class="bd-main" id="main-content">
<div class="sbt-scroll-pixel-helper"></div>
<div class="bd-content">
<div class="bd-article-container">
<div class="bd-header-article">
<div class="header-article-items header-article__inner">
<div class="header-article-items__start">
<div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" data-bs-placement="bottom" data-bs-toggle="tooltip" for="__primary" title="Toggle primary sidebar">
<span class="fa-solid fa-bars"></span>
</label></div>
</div>
<div class="header-article-items__end">
<div class="header-article-item">
<div class="article-header-buttons">
<div class="dropdown dropdown-launch-buttons">
<button aria-expanded="false" aria-label="Launch interactive content" class="btn dropdown-toggle" data-bs-toggle="dropdown" type="button">
<i class="fas fa-rocket"></i>
</button>
<ul class="dropdown-menu">
<li><a class="btn btn-sm dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="https://mybinder.org/v2/gh/BYUCamachoLab/Photonics-Bootcamp/main?urlpath=tree/book/pages/mzi.ipynb" target="_blank" title="Launch onBinder">
<span class="btn__icon-container">
<img src="../_static/images/logo_binder.svg"/>
</span>
<span class="btn__text-container">Binder</span>
</a>
</li>
<li><a class="btn btn-sm dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="https://colab.research.google.com/github/BYUCamachoLab/Photonics-Bootcamp/blob/main/book/pages/mzi.ipynb" target="_blank" title="Launch onColab">
<span class="btn__icon-container">
<img src="../_static/images/logo_colab.png"/>
</span>
<span class="btn__text-container">Colab</span>
</a>
</li>
</ul>
</div>
<div class="dropdown dropdown-source-buttons">
<button aria-expanded="false" aria-label="Source repositories" class="btn dropdown-toggle" data-bs-toggle="dropdown" type="button">
<i class="fab fa-github"></i>
</button>
<ul class="dropdown-menu">
<li><a class="btn btn-sm btn-source-repository-button dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="https://github.com/BYUCamachoLab/Photonics-Bootcamp" target="_blank" title="Source repository">
<span class="btn__icon-container">
<i class="fab fa-github"></i>
</span>
<span class="btn__text-container">Repository</span>
</a>
</li>
<li><a class="btn btn-sm btn-source-edit-button dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="https://github.com/BYUCamachoLab/Photonics-Bootcamp/edit/main/book/pages/mzi.ipynb" target="_blank" title="Suggest edit">
<span class="btn__icon-container">
<i class="fas fa-pencil-alt"></i>
</span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
<li><a class="btn btn-sm btn-source-issues-button dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="https://github.com/BYUCamachoLab/Photonics-Bootcamp/issues/new?title=Issue%20on%20page%20%2Fpages/mzi.html&amp;body=Your%20issue%20content%20here." target="_blank" title="Open an issue">
<span class="btn__icon-container">
<i class="fas fa-lightbulb"></i>
</span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
</ul>
</div>
<div class="dropdown dropdown-download-buttons">
<button aria-expanded="false" aria-label="Download this page" class="btn dropdown-toggle" data-bs-toggle="dropdown" type="button">
<i class="fas fa-download"></i>
</button>
<ul class="dropdown-menu">
<li><a class="btn btn-sm btn-download-source-button dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="../_sources/pages/mzi.ipynb" target="_blank" title="Download source file">
<span class="btn__icon-container">
<i class="fas fa-file"></i>
</span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
<li>
<button class="btn btn-sm btn-download-pdf-button dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" onclick="window.print()" title="Print to PDF">
<span class="btn__icon-container">
<i class="fas fa-file-pdf"></i>
</span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
</ul>
</div>
<button class="btn btn-sm btn-fullscreen-button" data-bs-placement="bottom" data-bs-toggle="tooltip" onclick="toggleFullScreen()" title="Fullscreen mode">
<span class="btn__icon-container">
<i class="fas fa-expand"></i>
</span>
</button>
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" data-bs-placement="bottom" data-bs-toggle="tooltip" for="__secondary" title="Toggle secondary sidebar">
<span class="fa-solid fa-list"></span>
</label>
</div></div>
</div>
</div>
</div>
<div class="onlyprint" id="jb-print-docs-body">
<h1>Mach-Zehnder interferometers</h1>
<!-- Table of contents -->
<div id="print-main-content">
<div id="jb-print-toc">
<div>
<h2> Contents </h2>
</div>
<nav aria-label="Page">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-mzi-from-it-s-components">The MZI from it’s components</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#models">Models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-the-netlist">Writing the netlist</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-using-callables">Simulation (using callables)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-a-balanced-mzi">Analysis of a balanced MZI</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-check">Quick check</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definitions">Definitions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-imblanced-mzi-s">Analysis of imblanced MZI’s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Quick check</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#thermo-optic-effect">Thermo-optic effect</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Quick check</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div id="searchbox"></div>
<article class="bd-article">
<section class="tex2jax_ignore mathjax_ignore" id="mach-zehnder-interferometers">
<h1>Mach-Zehnder interferometers<a class="headerlink" href="#mach-zehnder-interferometers" title="Permalink to this heading">#</a></h1>
<p><em>This tutorial is an extract from the Simphony docs. For further background reading, see the <a class="reference external" href="https://simphonyphotonics.readthedocs.io/en/latest/tutorials/intro.html">Introduction to simphony</a></em></p>
<p>In this tutorial, we’ll define and simulate a simple circuit known as a
Mach-Zender Interferometer (MZI).</p>
<p>The basic concept behind a Mach-Zehnder interferometer is that it splits a beam of light into two paths and then later recombines them. The resulting interference pattern depends on the relative path length, and therefore the accumulated phase, between the two paths. This is a very common device in quantum optics, and is used in many experiments.</p>
<p>Phase shifts may be caused by differing path lengths, or by the application of a phase shifter, such as a piezo-electric transducer.</p>
<p>Simphony uses <a class="reference external" href="https://flaport.github.io/sax/index.html">SAX</a> to define
models and simulate circuits, which uses
<a class="reference external" href="https://jax.readthedocs.io/en/latest/index.html">JAX</a> as a computational
engine. JAX can provide a nice speedup for larger circuits if their models are
appropriately defined and you have a GPU. Otherwise, it will run perfectly fine
on a CPU.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We run the following command <strong>first</strong> to ensure that JAX, the library that allows Simphony and SAX to run calculations on GPU’s, uses <a class="reference external" href="https://jax.readthedocs.io/en/latest/notebooks/Common_Gotchas_in_JAX.html#double-64bit-precision">double precision</a>. Be aware that this setting must be set before JAX initializes, or the setting won’t take.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jax</span> <span class="kn">import</span> <span class="n">config</span>
<span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">"jax_enable_x64"</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>In this tutorial, we’ll use JAX as a drop in replacement for NumPy, matplotlib for visualizing our results, and SAX for constructing our circuit and running our simulations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jax.numpy</span> <span class="k">as</span> <span class="nn">jnp</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">sax</span>
</pre></div>
</div>
</div>
</div>
<section id="the-mzi-from-it-s-components">
<h2>The MZI from it’s components<a class="headerlink" href="#the-mzi-from-it-s-components" title="Permalink to this heading">#</a></h2>
<p>In an MZI, light entering the circuit is split and travels down two paths of differing lengths. When the light is recombined, it interferes, and the output is frequency-dependent.</p>
<figure class="align-center" id="id3">
<img alt="Mach-Zehnder Interferometer (MZI) layout." src="_static/images/mzi.png">
<figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text">Chip layout of a Mach-Zehnder Interferometer (MZI).</span><a class="headerlink" href="#id3" title="Permalink to this image">#</a></p>
</figcaption>
</img></figure>
<p>The MZI we’ll create can be broken down into constituent parts. Simphony includes models for these building blocks below:</p>
<figure class="align-center" id="id4">
<img alt="Mach-Zehnder Interferometer (MZI) block diagram" src="_static/images/mzi_outline_ports_marked.png">
<figcaption>
<p><span class="caption-number">Fig. 2 </span><span class="caption-text">Block diagram of a Mach-Zehnder Interferometer (MZI) with the components labeled.</span><a class="headerlink" href="#id4" title="Permalink to this image">#</a></p>
</figcaption>
</img></figure>
<p>The grating couplers are the input and output for light in the circuit. The Y-branch can split and recombine light, and because the waveguides which carry light across the circuit have a different length relative to each other, this produces interference when the light is recombined at the second Y-branch. We can now begin defining our circuit in Simphony using the components we have identified.</p>
</section>
<section id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this heading">#</a></h2>
<p>We’ll use models from the <a class="reference external" href="https://github.com/SiEPIC/SiEPIC_EBeam_PDK">SiEPIC Ebeam PDK</a> library (already included in simphony).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">simphony.libraries</span> <span class="kn">import</span> <span class="n">siepic</span>
</pre></div>
</div>
</div>
</div>
<p>As explained in the Introduction, models in SAX (and therefore in Simphony) are simply “callables” (functions) that return a dictionary of scattering parameters. The keys of that resulting dictionary are the port-to-port relationships. In Simphony, we follow the convention <code class="docutils literal notranslate"><span class="pre">(output,</span> <span class="pre">input)</span></code> for the keys of the dictionary, which is the same as the S-parameter matrix formulation (where <span class="math notranslate nohighlight">\(S_{ij}\)</span> is the scattering parameter representing the response at port <span class="math notranslate nohighlight">\(j\)</span> given a stimuli at port <span class="math notranslate nohighlight">\(i\)</span>).</p>
<p>Models in SAX must have default parameters in their function signatures; that is, no positional arguments are allowed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>siepic.grating_coupler<span class="o">?</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class="-Color -Color-Red">Signature:</span>
siepic<span class="-Color -Color-Blue">.</span>grating_coupler<span class="-Color -Color-Blue">(</span>
    wl<span class="-Color -Color-Blue">:</span> Union<span class="-Color -Color-Blue">[</span>float<span class="-Color -Color-Blue">,</span> jax<span class="-Color -Color-Blue">.</span>Array<span class="-Color -Color-Blue">]</span> <span class="-Color -Color-Blue">=</span> <span class="-Color -Color-Cyan">1.55</span><span class="-Color -Color-Blue">,</span>
    pol<span class="-Color -Color-Blue">:</span> Literal<span class="-Color -Color-Blue">['te',</span> <span class="-Color -Color-Blue">'tm']</span> <span class="-Color -Color-Blue">=</span> <span class="-Color -Color-Blue">'te',</span>
    thickness<span class="-Color -Color-Blue">:</span> float <span class="-Color -Color-Blue">=</span> <span class="-Color -Color-Cyan">220.0</span><span class="-Color -Color-Blue">,</span>
    dwidth<span class="-Color -Color-Blue">:</span> float <span class="-Color -Color-Blue">=</span> <span class="-Color -Color-Cyan">0</span><span class="-Color -Color-Blue">,</span>
<span class="-Color -Color-Blue">)</span> <span class="-Color -Color-Blue">-&gt;</span> Dict<span class="-Color -Color-Blue">[</span>Tuple<span class="-Color -Color-Blue">[</span>str<span class="-Color -Color-Blue">,</span> str<span class="-Color -Color-Blue">],</span> jaxtyping<span class="-Color -Color-Blue">.</span>Complex<span class="-Color -Color-Blue">[</span>Array<span class="-Color -Color-Blue">,</span> <span class="-Color -Color-Blue">'...']]</span>
<span class="-Color -Color-Red">Docstring:</span>
SiEPIC EBeam PDK grating coupler optimized for TE polarizations at
1550nm.

The grating coupler efficiently couples light from a fiber array positioned
above the chip into the circuit. For the TE mode, the angle is -25 degrees
[needs citation].

.. image:: /_static/images/ebeam_gc_te1550.png
    :alt: ebeam_bdc_te1550.png

Parameters
----------
wl : float or Array
    The wavelengths to evaluate at in microns.
pol : {"te", "tm"}
    Polarization of the input/output modes.
thickness : {210.0, 220.0, 230.0}
    Thickness of the grating coupler silicon in nm. Useful for simulating
    manufacturing variability.
dwidth : {-20.0, 0.0, 20.0}
    Change in width from nominal of the gratings. Representative of
    manufacturing variability. Must be one of -20, 0, or 20.

Raises
------
ValueError
    If `pol` is not 'te' or 'tm'.
ValueError
    If `thickness` is not one of 210, 220, or 230.
ValueError
    If `dwidth` is not one of -20, 0, or 20.

Notes
-----
See also the PDK documentation:
https://github.com/SiEPIC/SiEPIC_EBeam_PDK/blob/master/Documentation/SiEPIC_EBeam_PDK%20-%20Components%20with%20Models.docx
<span class="-Color -Color-Red">File:</span>      ~/git/simphony/simphony/libraries/siepic/models.py
<span class="-Color -Color-Red">Type:</span>      function
</pre></div>
</div>
</div>
</div>
<p>This means that they can always be called without arguments to inspect what their default return values are and to see what port names are provided.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">siepic</span><span class="o">.</span><span class="n">grating_coupler</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{('o0', 'o0'): Array([-0.0307378-0.00345908j], dtype=complex128),
 ('o0', 'o1'): Array([0.75686856+0.02082852j], dtype=complex128),
 ('o1', 'o0'): Array([0.74360676+0.09760613j], dtype=complex128),
 ('o1', 'o1'): Array([0.0750638-0.02585451j], dtype=complex128)}
</pre></div>
</div>
</div>
</div>
<p>SAX also provides an explicit function to get the port names.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sax</span><span class="o">.</span><span class="n">get_ports</span><span class="p">(</span><span class="n">siepic</span><span class="o">.</span><span class="n">y_branch</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sax</span><span class="o">.</span><span class="n">get_ports</span><span class="p">(</span><span class="n">siepic</span><span class="o">.</span><span class="n">waveguide</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sax</span><span class="o">.</span><span class="n">get_ports</span><span class="p">(</span><span class="n">siepic</span><span class="o">.</span><span class="n">grating_coupler</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>('port 1', 'port 2', 'port 3')
('o0', 'o1')
('o0', 'o1')
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Throughout all of Simphony and SAX, the <code class="docutils literal notranslate"><span class="pre">"wl"</span></code> argument is in microns, by convention. This is not strictly enforced, and
various model libraries may follow different convention, so it’s always good to double check the documentation of the model you’re using (or, if you’re writing the model, create documentation for it)!</p>
</div>
</section>
<section id="writing-the-netlist">
<h2>Writing the netlist<a class="headerlink" href="#writing-the-netlist" title="Permalink to this heading">#</a></h2>
<p>A SAX circuit contains a
netlist, which is a collection of component instances, their connections, and
exposed ports; and a list of models, which makes it easy to swap out different
models without rewriting your netlist to see how the circuit behavior
changes.</p>
<p>The netlist is a dictionary with three fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">"instances"</span></code>: A dictionary of instance names to human-readable component
model strings (like “coupler” or “waveguide”). You will define the
string-to-model mapping later.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">"connections"</span></code>: A dictionary of ports to ports in the form
<code class="docutils literal notranslate"><span class="pre">"instance_name,port_name":</span> <span class="pre">"instance_name,port_name"</span></code> (note there is no
whitespace delimiting the instance from its port, just a comma).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">"ports"</span></code>: Since a SAX circuit is basically a model itself, and could be
used in other circuits, it has exposed ports. This field is a dictionary
mapping port names of the composite object to the ports of its constituent
instances.</p></li>
</ul>
<p>We’ll create</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mzi</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">sax</span><span class="o">.</span><span class="n">circuit</span><span class="p">(</span>
    <span class="n">netlist</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">"instances"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"gc_in"</span><span class="p">:</span> <span class="s2">"gc"</span><span class="p">,</span>
            <span class="s2">"splitter"</span><span class="p">:</span> <span class="s2">"ybranch"</span><span class="p">,</span>
            <span class="s2">"long_wg"</span><span class="p">:</span> <span class="s2">"waveguide"</span><span class="p">,</span>
            <span class="s2">"short_wg"</span><span class="p">:</span> <span class="s2">"waveguide"</span><span class="p">,</span>
            <span class="s2">"combiner"</span><span class="p">:</span> <span class="s2">"ybranch"</span><span class="p">,</span>
            <span class="s2">"gc_out"</span><span class="p">:</span> <span class="s2">"gc"</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">"connections"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"gc_in,o0"</span><span class="p">:</span> <span class="s2">"splitter,port 1"</span><span class="p">,</span>
            <span class="s2">"splitter,port 2"</span><span class="p">:</span> <span class="s2">"long_wg,o0"</span><span class="p">,</span>
            <span class="s2">"splitter,port 3"</span><span class="p">:</span> <span class="s2">"short_wg,o0"</span><span class="p">,</span>
            <span class="s2">"long_wg,o1"</span><span class="p">:</span> <span class="s2">"combiner,port 2"</span><span class="p">,</span>
            <span class="s2">"short_wg,o1"</span><span class="p">:</span> <span class="s2">"combiner,port 3"</span><span class="p">,</span>
            <span class="s2">"combiner,port 1"</span><span class="p">:</span> <span class="s2">"gc_out,o0"</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">"ports"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"in"</span><span class="p">:</span> <span class="s2">"gc_in,o1"</span><span class="p">,</span>
            <span class="s2">"out"</span><span class="p">:</span> <span class="s2">"gc_out,o1"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="n">models</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">"ybranch"</span><span class="p">:</span> <span class="n">siepic</span><span class="o">.</span><span class="n">y_branch</span><span class="p">,</span>
        <span class="s2">"waveguide"</span><span class="p">:</span> <span class="n">siepic</span><span class="o">.</span><span class="n">waveguide</span><span class="p">,</span>
        <span class="s2">"gc"</span><span class="p">:</span> <span class="n">siepic</span><span class="o">.</span><span class="n">grating_coupler</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="simulation-using-callables">
<h2>Simulation (using callables)<a class="headerlink" href="#simulation-using-callables" title="Permalink to this heading">#</a></h2>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">sax.circuit()</span></code> returns a tuple. The first element is another callable function. All
parameters you call it with will be passed on to the models contained within the
circuit, so long as they are named the same. In this way, a circuit itself can
act as a model within another circuit.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is important that your all models have <strong>common names</strong> for arguments. For example,
all models that take a <code class="docutils literal notranslate"><span class="pre">length</span></code> parameter should all use the name <code class="docutils literal notranslate"><span class="pre">length</span></code> for that argument. Models
that are wavelength dependent should all take the same <code class="docutils literal notranslate"><span class="pre">wl</span></code> keyword parameter (by
convention). If you have your own model library, you can follow whatever
convention you want, as long as it’s consistent.</p>
</div>
<p>The second element of the returned tuple is a information object that contains details
about the circuit.</p>
<p>We can simulate the circuit by simply calling it with the appropriate arguments–in this case, the wavelengths we want to
simulate at.</p>
<p>The circuit itself contains parameterized models. We can pass arguments targeting
those models by passing a dictionary of keyword arguments and corresponding values
when invoking the circuit function. The names you gave the instances
in the netlist become the keyword arguments of the function. You can pass a
dictionary which will be used to instantiate those components at simulation time.</p>
<p>If you’re unsure of the format of the settings dictionary you need to pass to the circuit, you can use SAX’s get_settings function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sax</span><span class="o">.</span><span class="n">get_settings</span><span class="p">(</span><span class="n">mzi</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{'gc_in': {'wl': Array(1.55, dtype=float64),
  'pol': 'te',
  'thickness': Array(220., dtype=float64),
  'dwidth': Array(0., dtype=float64)},
 'splitter': {'wl': Array(1.55, dtype=float64),
  'pol': 'te',
  'thickness': Array(220., dtype=float64),
  'width': Array(500., dtype=float64)},
 'long_wg': {'wl': Array(1.55, dtype=float64),
  'pol': 'te',
  'length': Array(0., dtype=float64),
  'width': Array(500., dtype=float64),
  'height': Array(220., dtype=float64),
  'loss': Array(0., dtype=float64)},
 'short_wg': {'wl': Array(1.55, dtype=float64),
  'pol': 'te',
  'length': Array(0., dtype=float64),
  'width': Array(500., dtype=float64),
  'height': Array(220., dtype=float64),
  'loss': Array(0., dtype=float64)},
 'combiner': {'wl': Array(1.55, dtype=float64),
  'pol': 'te',
  'thickness': Array(220., dtype=float64),
  'width': Array(500., dtype=float64)},
 'gc_out': {'wl': Array(1.55, dtype=float64),
  'pol': 'te',
  'thickness': Array(220., dtype=float64),
  'dwidth': Array(0., dtype=float64)}}
</pre></div>
</div>
</div>
</div>
<p>This is slightly overkill in our case. We don’t want to update <code class="docutils literal notranslate"><span class="pre">wl</span></code> for every single object. We only want to change the length parameters for the long and short waveguides, and let everything else stay with the default or assume a global value.</p>
<p>We can set the <code class="docutils literal notranslate"><span class="pre">"long_wg"</span></code> and <code class="docutils literal notranslate"><span class="pre">"short_wg"</span></code> waveguides to different lengths alone. The waveguide model within the circuit takes a “length” argument, so that’s what we’ll use in our dictionary of parameters that we pass using keyword arguments. These keyword arguments correspond to the <em>instance name</em> in the netlist. By setting <code class="docutils literal notranslate"><span class="pre">wl</span></code> at the toplevel, it will trickle down to all models that require a <code class="docutils literal notranslate"><span class="pre">wl</span></code> parameter.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wl</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">mzi</span><span class="p">(</span><span class="n">wl</span><span class="o">=</span><span class="n">wl</span><span class="p">,</span> <span class="n">long_wg</span><span class="o">=</span><span class="p">{</span><span class="s2">"length"</span><span class="p">:</span> <span class="mf">150.0</span><span class="p">},</span> <span class="n">short_wg</span><span class="o">=</span><span class="p">{</span><span class="s2">"length"</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">S</span></code> is now our evaluated s-parameter dictionary</p>
<p>We’re interested in the power transmitted from the input to the output, which is the magnitude squared of the s-parameter. We’ll square the magnitude of the <code class="docutils literal notranslate"><span class="pre">"out,in"</span></code> element of the resulting dictionary. Recall, too, that we renamed these “external” (unconnected) ports in the netlist when we created the circuit. It’s really easy to give the ports on your composite circuits meaningful names, and it makes your code much more readable.</p>
<p>Below, we plot both in linear and in log scale using <a class="reference external" href="https://matplotlib.org/"><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mag</span> <span class="o">=</span> <span class="n">jnp</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="s2">"out"</span><span class="p">,</span> <span class="s2">"in"</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wl</span><span class="p">,</span> <span class="n">mag</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Transmission"</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wl</span><span class="p">,</span> <span class="mi">10</span><span class="o">*</span><span class="n">jnp</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">mag</span><span class="p">))</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Transmission (dB)"</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Wavelength (um)"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"MZI Response"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/6a96f2438487b23bb76b90d9fd779d993f56718e8dbb496bd91079fe9dc5430f.png" src="../_images/6a96f2438487b23bb76b90d9fd779d993f56718e8dbb496bd91079fe9dc5430f.png"/>
</div>
</div>
<p>As you can see, and as you might have predicted, by varying the wavelength we can see different levels of power being output from the device. Notice how the power periodically dips to 0 (on the linear plot). This occurs when the phases of the two paths are exactly opposite, and the light destructively interferes. The power, however does not peak at a consistent maximum–an effect of using grating couplers, which are optimized for better coupling at some center wavelength (in this case, 1.55 microns).</p>
</section>
<section id="analysis-of-a-balanced-mzi">
<h2>Analysis of a balanced MZI<a class="headerlink" href="#analysis-of-a-balanced-mzi" title="Permalink to this heading">#</a></h2>
<p>You can think of a balanced interferometer as having equal path lengths when the light separates. In ideal conditions, this means that amount of power at the output is the same as the input.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gdsfactory</span> <span class="k">as</span> <span class="nn">gf</span>

<span class="n">PDK</span> <span class="o">=</span> <span class="n">gf</span><span class="o">.</span><span class="n">get_generic_pdk</span><span class="p">()</span>
<span class="n">PDK</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="c1"># The &lt;&lt; is shorthand for c.add_ref()</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">gf</span><span class="o">.</span><span class="n">Component</span><span class="p">(</span><span class="s2">"my_component"</span><span class="p">)</span>
<span class="n">mzi</span> <span class="o">=</span> <span class="n">c</span> <span class="o">&lt;&lt;</span> <span class="n">gf</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">mzi</span><span class="p">(</span><span class="n">delta_length</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">c</span><span class="o">.</span><span class="n">plot_matplotlib</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class="-Color -Color-Green">2024-01-09 23:00:01.222</span> | <span class="-Color -Color-Bold">INFO    </span> | <span class="-Color -Color-Cyan">gdsfactory.technology.layer_views</span>:<span class="-Color -Color-Cyan">__init__</span>:<span class="-Color -Color-Cyan">785</span> - <span class="-Color -Color-Bold">Importing LayerViews from YAML file: '/home/sequoia/git/Photonics-Bootcamp/env/lib/python3.11/site-packages/gdsfactory/generic_tech/layer_views.yaml'.</span>
<span class="-Color -Color-Green">2024-01-09 23:00:01.227</span> | <span class="-Color -Color-Bold">INFO    </span> | <span class="-Color -Color-Cyan">gdsfactory.pdk</span>:<span class="-Color -Color-Cyan">activate</span>:<span class="-Color -Color-Cyan">258</span> - <span class="-Color -Color-Bold">'generic' PDK is now active</span>
</pre></div>
</div>
<img alt="../_images/d30d68ddd43e49e0882b36f1269edec6dc7dbfabcadf0dd3dea898b99afe6fe2.png" src="../_images/d30d68ddd43e49e0882b36f1269edec6dc7dbfabcadf0dd3dea898b99afe6fe2.png"/>
</div>
</div>
<p>There are there three different relevant amplitudes:</p>
<ol class="arabic simple">
<li><p>The amplitude of the input light:
<span class="math notranslate nohighlight">\(
 I_{input} = E_{input}^2
\)</span></p></li>
<li><p>The amplitudes of the beams after the split
<span class="math notranslate nohighlight">\(
 E_{1} = \frac{E_{input}}{\sqrt{2}}, \hspace{2mm} E_{2} = \frac{E_{input}}{\sqrt{2}}
\)</span></p></li>
<li><p>The amplitude of the recombined light
<span class="math notranslate nohighlight">\(
 I_{output} = [\frac{E_{1}+E_{2}}{\sqrt{2}}]^2 = I_{input}
\)</span></p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that these are not generalized equations. Instead, these describe a balanced interferometer whose branches have not undergone a phase shift.</p>
</div>
<section id="quick-check">
<h3>Quick check<a class="headerlink" href="#quick-check" title="Permalink to this heading">#</a></h3>
<p>If intensity of the input wave to a balanced interferometer is 0.5 mW, what is the intensity at the output? Assume lossless waveguides.</p>
<details>
<summary>Answer</summary>
    0.5 mW 
</details></section>
</section>
<section id="definitions">
<h2>Definitions<a class="headerlink" href="#definitions" title="Permalink to this heading">#</a></h2>
<p>It would be helpful to mathematically model the light in our waveguides. We can start to build a model by considering the equation for a plane wave.</p>
<div class="math notranslate nohighlight">
\[    
E = E_0 e^{i(\omega t - \beta z)}
\]</div>
<p>Propagation Constant of Light:
<span class="math notranslate nohighlight">\(
    \beta = \frac{2 \pi n}{\lambda} 
\)</span></p>
<p>If the equations above describe the propogation of the wave before the light gets split by the MZI, we can represent the two resulting beams as follows.</p>
<div class="math notranslate nohighlight">
\[
E_{o1} = \frac{E_{i}}{\sqrt{2}}e^{-i\beta_{1}L_{1}-\frac{\alpha_{1}}{2}L_{1}}
\]</div>
<div class="math notranslate nohighlight">
\[
E_{o2} = \frac{E_{i}}{\sqrt{2}}e^{-i\beta_{2}L_{2}-\frac{\alpha_{2}}{2}L_{2}}
\]</div>
<p>*** As the light travels through the waveguide we can imagine that it will experience some degree of loss. The ‘α’ term that appeared in the exponents is the loss coefficient. For convenience, the following examples will assume that α = 0, or that there is zero loss in our waveguides.</p>
<p>And finally the intensity of the the recombined light at the end of the MZI can be described like so:</p>
<div class="math notranslate nohighlight">
\[
I_{output} = \frac{I_{input}}{4} \lvert E_{o1} + E_{o2} \lvert ^2 
\]</div>
</section>
<section id="analysis-of-imblanced-mzi-s">
<h2>Analysis of imblanced MZI’s<a class="headerlink" href="#analysis-of-imblanced-mzi-s" title="Permalink to this heading">#</a></h2>
<p>The equation below is the simplified version of the above expressions assuming no difference in the propogation constants of the two different waveguides and no loss.</p>
<div class="math notranslate nohighlight">
\[
I_{output} = \frac{I_{input}}{2}(1 + cos(\beta \Delta L))
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gdsfactory</span> <span class="k">as</span> <span class="nn">gf</span>

<span class="n">PDK</span> <span class="o">=</span> <span class="n">gf</span><span class="o">.</span><span class="n">get_generic_pdk</span><span class="p">()</span>
<span class="n">PDK</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">gf</span><span class="o">.</span><span class="n">Component</span><span class="p">(</span><span class="s2">"my_component"</span><span class="p">)</span>
<span class="n">mzi</span> <span class="o">=</span> <span class="n">c</span> <span class="o">&lt;&lt;</span> <span class="n">gf</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">mzi</span><span class="p">(</span><span class="n">delta_length</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="n">c</span><span class="o">.</span><span class="n">plot_matplotlib</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class="-Color -Color-Green">2024-01-09 22:59:50.499</span> | <span class="-Color -Color-Bold">INFO    </span> | <span class="-Color -Color-Cyan">gdsfactory.technology.layer_views</span>:<span class="-Color -Color-Cyan">__init__</span>:<span class="-Color -Color-Cyan">785</span> - <span class="-Color -Color-Bold">Importing LayerViews from YAML file: '/home/sequoia/git/Photonics-Bootcamp/env/lib/python3.11/site-packages/gdsfactory/generic_tech/layer_views.yaml'.</span>
<span class="-Color -Color-Green">2024-01-09 22:59:50.508</span> | <span class="-Color -Color-Bold">INFO    </span> | <span class="-Color -Color-Cyan">gdsfactory.pdk</span>:<span class="-Color -Color-Cyan">activate</span>:<span class="-Color -Color-Cyan">258</span> - <span class="-Color -Color-Bold">'generic' PDK is now active</span>
</pre></div>
</div>
<img alt="../_images/9a415e85d0c43a7a40bed466a818eb08f4cae62e6a4b0a95e4be1e379298b378.png" src="../_images/9a415e85d0c43a7a40bed466a818eb08f4cae62e6a4b0a95e4be1e379298b378.png"/>
</div>
</div>
<section id="id1">
<h3>Quick check<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<p>What is the intensity of the output light if the input light had an intensity of 0.75 mW and a refractive index through silicon of <span class="math notranslate nohighlight">\(n = 3.48\)</span> when operating at a wavelength of 1450 nm? The shorter path has a length of 90 <span class="math notranslate nohighlight">\(\mu \text{m}\)</span> and the longer path a length of 102 <span class="math notranslate nohighlight">\(\mu \text{m}\)</span>.</p>
<details>
<summary>Answer</summary>
    0.491 mW
</details></section>
</section>
<section id="thermo-optic-effect">
<h2>Thermo-optic effect<a class="headerlink" href="#thermo-optic-effect" title="Permalink to this heading">#</a></h2>
<p>While a balanced MZI will not experience a phase shift due to a difference in path length, we can introduce a phasae shift by utilizing other methods. The thermo-optic effect describes the effect of heat on the phase of light. By heating up one of the waveguide in the MZI, we can control the phase shift of that waveguide and therefor the intensity of the output. This is a practical way to turn our otherwise static MZI in to a switch that we can control.</p>
<p><img alt="Image of a thermo-optic switch" src="https://raw.githubusercontent.com/BYUCamachoLab/Photonics-Bootcamp/main/book/images/Notebook_Images/thermo_optic_switch.png"/></p>
<p>Introducing a phase shift in this way will affect the propogation constant ‘β’ and since we are assuming that the path lengths are equal, we can modify our previous equation like this:</p>
<div class="math notranslate nohighlight">
\[
I_{output} = \frac{I_{input}}{2}(1 + cos(\Delta\beta L))
\]</div>
<section id="id2">
<h3>Quick check<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h3>
<p>Assume that the lengths of the two paths are 100µm, the light has a wavelength of 1500nm and the ouptput was measured to be 0.9mW. What is the input intensity of the MZI if the heater introduced a 90° phase shift in the top waveguide?</p>
<details>
<summary>Answer</summary>
    0.0 mW
</details></section>
</section>
</section>
<script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./pages"
        },
        predefinedOutput: true
    }
    </script>
<script>kernelName = 'python3'</script>
</article>
<footer class="prev-next-footer">
<div class="prev-next-area">
<a class="left-prev" href="pdks.html" title="previous page">
<i class="fa-solid fa-angle-left"></i>
<div class="prev-next-info">
<p class="prev-next-subtitle">previous</p>
<p class="prev-next-title">Process design kits</p>
</div>
</a>
<a class="right-next" href="advanced_components.html" title="next page">
<div class="prev-next-info">
<p class="prev-next-subtitle">next</p>
<p class="prev-next-title">Advanced Components</p>
</div>
<i class="fa-solid fa-angle-right"></i>
</a>
</div>
</footer>
</div>
<div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">
<div class="sidebar-secondary-item">
<div class="page-toc tocsection onthispage">
<i class="fa-solid fa-list"></i> Contents
  </div>
<nav class="bd-toc-nav page-toc">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-mzi-from-it-s-components">The MZI from it’s components</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#models">Models</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#writing-the-netlist">Writing the netlist</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-using-callables">Simulation (using callables)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-a-balanced-mzi">Analysis of a balanced MZI</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-check">Quick check</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#definitions">Definitions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-of-imblanced-mzi-s">Analysis of imblanced MZI’s</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Quick check</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#thermo-optic-effect">Thermo-optic effect</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Quick check</a></li>
</ul>
</li>
</ul>
</nav></div>
</div></div>
</div>
<footer class="bd-footer-content">
<div class="bd-footer-content__inner container">
<div class="footer-item">
<p class="component-author">
By CamachoLab and Google
</p>
</div>
<div class="footer-item">
<p class="copyright">
    
      © Copyright 2023.
      <br/>
</p>
</div>
<div class="footer-item">
</div>
<div class="footer-item">
</div>
</div>
</footer>
</main>
</div>
</div>
<!-- Scripts loaded after <body> so the DOM is not blocked -->
<script src="../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>
<footer class="bd-footer">
</footer>
<script src="../_static/scripts/chattutor.config.js"></script><script src="../_static/scripts/chattutor.min.js" type="module"></script></body>
</html>