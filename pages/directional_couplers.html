
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Directional Couplers &#8212; CamachoLab Photonics Bootcamp</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="canonical" href="https://byucamacholab.github.io/Photonics-Bootcamp/pages/directional_couplers.html" />
    <link rel="shortcut icon" href="../_static/favicon-laser.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Open Source Software" href="open_source.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Front Matter
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="credits.html">
   Credits
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Familiar with Code
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="open_source.html">
   Open Source Software
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Passive Device Design and Simulation
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Directional Couplers
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  References
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/BYUCamachoLab/sky130ph">
   Repository
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/BYUCamachoLab/sky130ph/docs">
   PDK Documentation
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/pages/directional_couplers.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#supermodes">
   Supermodes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#coupling-coefficient">
   Coupling Coefficient
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#beating">
   Beating
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cross-over-length">
   Cross-over Length
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#simulation">
   Simulation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#graphs-to-show-the-relationship-that-hopefully-they-have-just-observed-in-code">
   Graphs to show the relationship that hopefully they have just observed in code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#coupler-gap-dependence">
   Coupler-gap Dependence
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sources">
     Sources
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Directional Couplers</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#supermodes">
   Supermodes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#coupling-coefficient">
   Coupling Coefficient
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#beating">
   Beating
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cross-over-length">
   Cross-over Length
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#simulation">
   Simulation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#graphs-to-show-the-relationship-that-hopefully-they-have-just-observed-in-code">
   Graphs to show the relationship that hopefully they have just observed in code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#coupler-gap-dependence">
   Coupler-gap Dependence
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sources">
     Sources
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="directional-couplers">
<h1>Directional Couplers<a class="headerlink" href="#directional-couplers" title="Permalink to this headline">#</a></h1>
<p>Directional couplers move light from one waveguide to another. This is done simply by bringing two waveguides parallel to each other for a certain distance at certain distance apart. The evanescent fields (fields existing outside of the waveguide) of one waveguide interact with another and thus power is transferred. This principle can be used to split or combine light, depending on the coupling length (the length at which the waveguides are sufficiently close to each other) and the phase of the light in the waveguides.</p>
<section id="supermodes">
<h2>Supermodes<a class="headerlink" href="#supermodes" title="Permalink to this headline">#</a></h2>
<p>Just like there are modes that exist in one waveguide, supermodes are modes that exist in multiple waveguides based on the interaction between them. These modes interact with each other and the combination of these interactions results in what light is propagating in the waveguide.</p>
<p>An “odd”, or antisymmetric, supermode occurs when light in the two waveguides are <span class="math notranslate nohighlight">\(180\degree\)</span> out of phase i.e. perfectly out of phase. Similarly, an “even”, or symmetric, supermode occurs when the two waveguides are in phase.</p>
<p>The effective indices (<span class="math notranslate nohighlight">\(n_{eff,even}\)</span>, <span class="math notranslate nohighlight">\(n_{eff,odd}\)</span>) of the supermodes differs from that of the normal mode in the waveguide. <span class="math notranslate nohighlight">\(n_{eff,even}\)</span> increases as the coupling gap decreases, and <span class="math notranslate nohighlight">\(n_{eff,odd}\)</span> decreases as the coupling gap decreases.</p>
</section>
<section id="coupling-coefficient">
<h2>Coupling Coefficient<a class="headerlink" href="#coupling-coefficient" title="Permalink to this headline">#</a></h2>
<p>The coupling coefficient is <span class="math notranslate nohighlight">\(C = \frac{\pi\Delta n}{\lambda}\)</span></p>
<p>Where <span class="math notranslate nohighlight">\(\Delta n = |n_{eff,even} - n_{eff,odd}|\)</span></p>
<p><strong>NEED PICTURES FOR CLARITY. Also, more intuitive understanding of why the indices do what they do</strong></p>
</section>
<section id="beating">
<h2>Beating<a class="headerlink" href="#beating" title="Permalink to this headline">#</a></h2>
<p>As the supermodes propagate with different propagation constants, the field intensity oscillates between the two waveguides. This is called beating.</p>
<p>The propagation constants are:
<span class="math notranslate nohighlight">\(\beta _1 = \frac{2 \pi n_1}{\lambda}\)</span> and
<span class="math notranslate nohighlight">\(\beta _2 = \frac{2 \pi n_2}{\lambda}\)</span></p>
<p>The length it takes for one beat (for all of the power to go from one waveguide to the other) is called the cross-over length.</p>
</section>
<section id="cross-over-length">
<h2>Cross-over Length<a class="headerlink" href="#cross-over-length" title="Permalink to this headline">#</a></h2>
<p>The power that one waveguide receives from the other is given by:</p>
<div class="math notranslate nohighlight">
\[
P_{cross}(L) = P_{initial}sin^2(\frac{\pi\Delta n}{\lambda}L)
\]</div>
<p>and the coupling length, <span class="math notranslate nohighlight">\(L\)</span>, that gives 100% power transfer is $<span class="math notranslate nohighlight">\(L_{cross-over} = \frac {\lambda}{2\Delta n}\)</span>$</p>
<p>This is found from determining what length when multiplied by the propagation constants makes the phase difference <span class="math notranslate nohighlight">\(\pi\)</span>:</p>
<div class="math notranslate nohighlight">
\[ \beta _1 L_x - \beta _2 L_x = \pi \]</div>
<div class="math notranslate nohighlight">
\[ L_x[\frac{2 \pi n_1}{\lambda} - \frac{2 \pi n_2}{\lambda}] = \pi \]</div>
</section>
<section id="simulation">
<h2>Simulation<a class="headerlink" href="#simulation" title="Permalink to this headline">#</a></h2>
<p>To explore how electric field intensity oscillates between two close waveguides, a meep simulation is provided below that creates two long waveguides with a gap of 0.2um, excites a source at the end of one, and shows the electric field intensity over time in the waveguides. Change the gap distance to observe its affect on the cross-over length. You can also change the lengths of the waveguides to better see the beating. The simulation may take a couple of minutes depending on the length of your waveguide. The plot of the simulation setup and the outputted GIF showing the field intensities for a simulation with a gap of <span class="math notranslate nohighlight">\(0.2 \mu m\)</span> is shown below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">meep</span> <span class="k">as</span> <span class="nn">mp</span>

<span class="c1"># Define materials</span>
<span class="n">Si</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Medium</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mf">3.45</span><span class="p">)</span>
<span class="n">SiO2</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Medium</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mf">1.45</span><span class="p">)</span>

<span class="c1"># Define wavelength in um</span>
<span class="n">wvl</span> <span class="o">=</span> <span class="mf">1.55</span>


<span class="c1"># # Define cell and geometric parameters</span>
<span class="n">resolution</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">wg_width</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">dpml</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">pad</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="c1">## CHANGE GAP DISTANCE ##</span>
<span class="n">gap</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="c1">## CHANGE WAVEGUIDE LENGTH ##</span>
<span class="n">Lx</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">Sx</span> <span class="o">=</span> <span class="n">dpml</span> <span class="o">+</span> <span class="n">Lx</span> <span class="o">+</span> <span class="n">dpml</span>
<span class="n">Sy</span> <span class="o">=</span> <span class="n">dpml</span> <span class="o">+</span> <span class="n">pad</span> <span class="o">+</span> <span class="n">wg_width</span> <span class="o">+</span> <span class="n">gap</span> <span class="o">+</span> <span class="n">wg_width</span> <span class="o">+</span> <span class="n">pad</span> <span class="o">+</span> <span class="n">dpml</span>
<span class="n">wg_center_y</span> <span class="o">=</span> <span class="n">gap</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">wg_width</span><span class="o">/</span><span class="mi">2</span>

<span class="c1"># Add PML (perfectly matched layers)</span>
<span class="n">pml</span> <span class="o">=</span> <span class="p">[</span><span class="n">mp</span><span class="o">.</span><span class="n">PML</span><span class="p">(</span><span class="n">dpml</span><span class="p">)]</span>

<span class="c1"># Create 2 infinitely long parallel waveguides</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="p">[</span><span class="n">mp</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="n">Sx</span><span class="p">,</span><span class="n">Sy</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">center</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(),</span> <span class="n">material</span><span class="o">=</span><span class="n">SiO2</span><span class="p">),</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="n">Sx</span><span class="p">,</span><span class="n">wg_width</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">center</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wg_center_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">material</span><span class="o">=</span><span class="n">Si</span><span class="p">),</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="n">Sx</span><span class="p">,</span><span class="n">wg_width</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">center</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">wg_center_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">material</span><span class="o">=</span><span class="n">Si</span><span class="p">),</span>
            <span class="p">]</span>

<span class="c1"># Put Eigenmode source at beginning of one waveguide</span>
<span class="n">fcen</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">wvl</span>
<span class="n">width</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">fwidth</span> <span class="o">=</span> <span class="n">width</span> <span class="o">*</span> <span class="n">fcen</span>
<span class="n">src</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">GaussianSource</span><span class="p">(</span><span class="n">frequency</span><span class="o">=</span><span class="n">fcen</span><span class="p">,</span> <span class="n">fwidth</span><span class="o">=</span><span class="n">fwidth</span><span class="p">)</span>
<span class="n">source</span> <span class="o">=</span> <span class="p">[</span><span class="n">mp</span><span class="o">.</span><span class="n">EigenModeSource</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">src</span><span class="p">,</span> <span class="n">eig_band</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">eig_kpoint</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">size</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">gap</span><span class="o">+</span><span class="n">wg_width</span><span class="p">),</span>
        <span class="n">center</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="o">-</span><span class="n">Sx</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">dpml</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="n">wg_center_y</span><span class="p">))</span>
        <span class="p">]</span>

<span class="c1"># Simulation object</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span>
    <span class="n">cell_size</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="n">Sx</span><span class="p">,</span> <span class="n">Sy</span><span class="p">),</span>
    <span class="n">boundary_layers</span><span class="o">=</span><span class="n">pml</span><span class="p">,</span>
    <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
    <span class="n">sources</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
    <span class="n">default_material</span><span class="o">=</span><span class="n">SiO2</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Show simulation set-up</span>
<span class="n">sim</span><span class="o">.</span><span class="n">plot2D</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     block, center = (0,0,0)
          size (102,4.2,0)
          axes (1,0,0), (0,1,0), (0,0,1)
          dielectric constant epsilon diagonal = (2.1025,2.1025,2.1025)
     block, center = (0,0.35,0)
          size (102,0.5,0)
          axes (1,0,0), (0,1,0), (0,0,1)
          dielectric constant epsilon diagonal = (11.9025,11.9025,11.9025)
     block, center = (0,-0.35,0)
          size (102,0.5,0)
          axes (1,0,0), (0,1,0), (0,0,1)
          dielectric constant epsilon diagonal = (11.9025,11.9025,11.9025)
-----------
Initializing structure...
time for choose_chunkdivision = 0.000727892 s
Working in 2D dimensions.
Computational cell is 102 x 4.2 x 0 with resolution 20
     block, center = (0,0,0)
          size (102,4.2,0)
          axes (1,0,0), (0,1,0), (0,0,1)
          dielectric constant epsilon diagonal = (2.1025,2.1025,2.1025)
     block, center = (0,0.35,0)
          size (102,0.5,0)
          axes (1,0,0), (0,1,0), (0,0,1)
          dielectric constant epsilon diagonal = (11.9025,11.9025,11.9025)
     block, center = (0,-0.35,0)
          size (102,0.5,0)
          axes (1,0,0), (0,1,0), (0,0,1)
          dielectric constant epsilon diagonal = (11.9025,11.9025,11.9025)
time for set_epsilon = 0.518902 s
-----------
MPB solved for frequency_1(1,0,0) = 0.329833 after 15 iters
MPB solved for frequency_1(2.02363,0,0) = 0.630122 after 9 iters
MPB solved for frequency_1(2.07637,0,0) = 0.645153 after 6 iters
MPB solved for frequency_1(2.0764,0,0) = 0.645161 after 3 iters
creating output file &quot;./eps-000000.00.h5&quot;...
creating output file &quot;./ez.h5&quot;...
Meep progress: 15.600000000000001/600.0 = 2.6% done in 4.0s, 150.5s to go
on time step 629 (time=15.725), 0.00636061 s/step
Meep progress: 33.15/600.0 = 5.5% done in 8.0s, 137.1s to go
on time step 1331 (time=33.275), 0.00570082 s/step
Meep progress: 51.0/600.0 = 8.5% done in 12.0s, 129.7s to go
on time step 2040 (time=51), 0.00564361 s/step
Meep progress: 68.4/600.0 = 11.4% done in 16.1s, 124.9s to go
on time step 2736 (time=68.4), 0.00577937 s/step
Meep progress: 86.15/600.0 = 14.4% done in 20.1s, 119.7s to go
on time step 3446 (time=86.15), 0.00563427 s/step
Meep progress: 103.80000000000001/600.0 = 17.3% done in 24.1s, 115.1s to go
on time step 4152 (time=103.8), 0.00567469 s/step
Meep progress: 121.80000000000001/600.0 = 20.3% done in 28.1s, 110.4s to go
on time step 4872 (time=121.8), 0.00560163 s/step
Meep progress: 139.8/600.0 = 23.3% done in 32.1s, 105.8s to go
on time step 5592 (time=139.8), 0.0055793 s/step
Meep progress: 157.775/600.0 = 26.3% done in 36.1s, 101.3s to go
on time step 6311 (time=157.775), 0.00556556 s/step
Meep progress: 175.65/600.0 = 29.3% done in 40.1s, 97.0s to go
on time step 7027 (time=175.675), 0.00559206 s/step
Meep progress: 193.47500000000002/600.0 = 32.2% done in 44.1s, 92.7s to go
on time step 7740 (time=193.5), 0.00561392 s/step
Meep progress: 209.3/600.0 = 34.9% done in 48.1s, 89.9s to go
on time step 8374 (time=209.35), 0.00631556 s/step
Meep progress: 226.4/600.0 = 37.7% done in 52.1s, 86.0s to go
on time step 9058 (time=226.45), 0.00585268 s/step
Meep progress: 243.32500000000002/600.0 = 40.6% done in 56.1s, 82.3s to go
on time step 9735 (time=243.375), 0.0059127 s/step
Meep progress: 259.8/600.0 = 43.3% done in 60.1s, 78.8s to go
on time step 10394 (time=259.85), 0.00607428 s/step
Meep progress: 274.2/600.0 = 45.7% done in 64.2s, 76.2s to go
on time step 10969 (time=274.225), 0.00696304 s/step
Meep progress: 291.45/600.0 = 48.6% done in 68.2s, 72.2s to go
on time step 11659 (time=291.475), 0.00579945 s/step
Meep progress: 308.32500000000005/600.0 = 51.4% done in 72.2s, 68.3s to go
on time step 12334 (time=308.35), 0.00592838 s/step
Meep progress: 323.625/600.0 = 53.9% done in 76.2s, 65.0s to go
on time step 12947 (time=323.675), 0.00652872 s/step
Meep progress: 335.40000000000003/600.0 = 55.9% done in 80.2s, 63.3s to go
on time step 13416 (time=335.4), 0.00857221 s/step
Meep progress: 349.55/600.0 = 58.3% done in 84.2s, 60.3s to go
on time step 13983 (time=349.575), 0.00705807 s/step
Meep progress: 361.57500000000005/600.0 = 60.3% done in 88.2s, 58.2s to go
on time step 14465 (time=361.625), 0.00831222 s/step
Meep progress: 377.625/600.0 = 62.9% done in 92.2s, 54.3s to go
on time step 15108 (time=377.7), 0.00622645 s/step
Meep progress: 394.425/600.0 = 65.7% done in 96.2s, 50.1s to go
on time step 15780 (time=394.5), 0.00595416 s/step
Meep progress: 411.0/600.0 = 68.5% done in 100.2s, 46.1s to go
on time step 16440 (time=411), 0.00607676 s/step
Meep progress: 426.6/600.0 = 71.1% done in 104.2s, 42.4s to go
on time step 17064 (time=426.6), 0.00642942 s/step
Meep progress: 441.6/600.0 = 73.6% done in 108.3s, 38.8s to go
on time step 17664 (time=441.6), 0.00673603 s/step
Meep progress: 451.375/600.0 = 75.2% done in 112.3s, 37.0s to go
on time step 18055 (time=451.375), 0.0102431 s/step
Meep progress: 465.55/600.0 = 77.6% done in 116.3s, 33.6s to go
on time step 18623 (time=465.575), 0.00704816 s/step
Meep progress: 482.40000000000003/600.0 = 80.4% done in 120.3s, 29.3s to go
on time step 19296 (time=482.4), 0.00594999 s/step
Meep progress: 499.35/600.0 = 83.2% done in 124.3s, 25.1s to go
on time step 19974 (time=499.35), 0.00590493 s/step
Meep progress: 516.025/600.0 = 86.0% done in 128.3s, 20.9s to go
on time step 20641 (time=516.025), 0.00599743 s/step
Meep progress: 533.4/600.0 = 88.9% done in 132.3s, 16.5s to go
on time step 21336 (time=533.4), 0.00577334 s/step
Meep progress: 550.8000000000001/600.0 = 91.8% done in 136.3s, 12.2s to go
on time step 22032 (time=550.8), 0.00579519 s/step
Meep progress: 568.2/600.0 = 94.7% done in 140.4s, 7.9s to go
on time step 22728 (time=568.2), 0.00577375 s/step
Meep progress: 584.9/600.0 = 97.5% done in 144.4s, 3.7s to go
on time step 23397 (time=584.925), 0.00598429 s/step
run 0 finished at t = 600.0 (24000 timesteps)
</pre></div>
</div>
<img alt="../_images/directional_couplers_5_1.png" src="../_images/directional_couplers_5_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Capture electric field intensity over time and output into a gif</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">at_beginning</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">output_epsilon</span><span class="p">),</span>
        <span class="n">mp</span><span class="o">.</span><span class="n">to_appended</span><span class="p">(</span><span class="s2">&quot;ez&quot;</span><span class="p">,</span> <span class="n">mp</span><span class="o">.</span><span class="n">at_every</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">mp</span><span class="o">.</span><span class="n">output_efield_z</span><span class="p">)),</span>
        <span class="n">until</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>

<span class="c1"># Generate pngs from the simulation output</span>
<span class="c1"># The line that worked in my workspace</span>
<span class="c1">#os.system(&quot;h5topng -t 0:299 -R -Zc /home/ebang4/miniconda3/envs/h5utils/share/h5utils/colormaps/RdBu -A /home/ebang4/Github/Photonics-Bootcamp/book/pages/eps-000000.00.h5 -a /home/ebang4/miniconda3/envs/h5utils/share/h5utils/colormaps/gray /home/ebang4/Github/Photonics-Bootcamp/book/pages/ez.h5&quot;)</span>

<span class="c1"># This line assumes that their colormaps are working and that they are in the same directory as the output files</span>
<span class="c1"># also that h5py is installed</span>
<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;h5topng -t 0:299 -R -Zc RdBu -A eps-000000.00.h5 -a gray ez.h5&quot;</span><span class="p">)</span>

<span class="c1"># Create a gif from the pngs</span>
<span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">imgs</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;ez.t*&quot;</span><span class="p">)</span>
<span class="n">imgs</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">imgs</span><span class="p">:</span>
    <span class="n">new_frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_frame</span><span class="p">)</span>

 
<span class="c1"># Save into a GIF file that loops forever</span>
<span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;ez.gif&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;GIF&#39;</span><span class="p">,</span>
               <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
               <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Clean up workspace by deleting all generated images</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">imgs</span><span class="p">:</span> 
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
</section>
<section id="graphs-to-show-the-relationship-that-hopefully-they-have-just-observed-in-code">
<h2>Graphs to show the relationship that hopefully they have just observed in code<a class="headerlink" href="#graphs-to-show-the-relationship-that-hopefully-they-have-just-observed-in-code" title="Permalink to this headline">#</a></h2>
</section>
<section id="coupler-gap-dependence">
<h2>Coupler-gap Dependence<a class="headerlink" href="#coupler-gap-dependence" title="Permalink to this headline">#</a></h2>
<p>How does the gap between the waveguides affect the coupling coefficient?</p>
<div class="math notranslate nohighlight">
\[C = B\cdot e^{-A \cdot g}\]</div>
<p><span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> are dependent on</p>
<section id="sources">
<h3>Sources<a class="headerlink" href="#sources" title="Permalink to this headline">#</a></h3>
<p>“Silicon Photonics Design” by Lukas Chrostowski</p>
<p>“Photonic Components: Directional Coupler” by Stefan Preble (slides)</p>
<p>h5utils                   1.13.1          nompi_h51f32c1_1114    conda-forge
hdf5                      1.12.2          nompi_h4df4325_100    conda-forge</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./pages"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="open_source.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Open Source Software</p>
        </div>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By CamachoLab and Google<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>