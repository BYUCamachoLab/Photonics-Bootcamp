
<!DOCTYPE html>

<html data-content_root="" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>Directional couplers — CamachoLab Photonics Bootcamp</title>
<script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
<!-- Loaded before other Sphinx assets -->
<link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet"/>
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet"/>
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet"/>
<link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" rel="preload" type="font/woff2"/>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<link href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" rel="stylesheet" type="text/css"/>
<link href="../_static/togglebutton.css" rel="stylesheet" type="text/css"/>
<link href="../_static/copybutton.css" rel="stylesheet" type="text/css"/>
<link href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" rel="stylesheet" type="text/css"/>
<link href="../_static/sphinx-thebe.css" rel="stylesheet" type="text/css"/>
<link href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" rel="stylesheet" type="text/css"/>
<!-- Pre-loaded scripts that we'll load fully later -->
<link as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" rel="preload"/>
<link as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" rel="preload"/>
<script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>
<script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
<script src="../_static/jquery.js"></script>
<script src="../_static/underscore.js"></script>
<script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="../_static/doctools.js"></script>
<script src="../_static/clipboard.min.js"></script>
<script src="../_static/copybutton.js"></script>
<script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
<script>let toggleHintShow = 'Click to show';</script>
<script>let toggleHintHide = 'Click to hide';</script>
<script>let toggleOpenOnPrint = 'true';</script>
<script src="../_static/togglebutton.js"></script>
<script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
<script src="../_static/design-tabs.js"></script>
<script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
<script async="async" src="../_static/sphinx-thebe.js"></script>
<script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
<script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>DOCUMENTATION_OPTIONS.pagename = 'pages/directional_couplers';</script>
<link href="https://byucamacholab.github.io/Photonics-Bootcamp/pages/directional_couplers.html" rel="canonical"/>
<link href="../_static/favicon-laser.svg" rel="shortcut icon"/>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="y_branch.html" rel="next" title="Y-Branches"/>
<link href="passive_components.html" rel="prev" title="Passive Components"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
<link href="../_static/styles/chattutor.style.css" rel="stylesheet" type="text/css"/></head>
<body data-bs-root-margin="0px 0px -60%" data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-default-mode="" data-offset="180">
<div class="skip-link d-print-none" id="pst-skip-link"><a href="#main-content">Skip to main content</a></div>
<div id="pst-scroll-pixel-helper"></div>
<button class="btn rounded-pill" id="pst-back-to-top" type="button">
<i class="fa-solid fa-arrow-up"></i>Back to top</button>
<input class="sidebar-toggle" id="pst-primary-sidebar-checkbox" type="checkbox"/>
<label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
<input class="sidebar-toggle" id="pst-secondary-sidebar-checkbox" type="checkbox"/>
<label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
<div class="search-button__wrapper">
<div class="search-button__overlay"></div>
<div class="search-button__search-container">
<form action="../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="fa-solid fa-magnifying-glass"></i>
<input aria-label="Search this book..." autocapitalize="off" autocomplete="off" autocorrect="off" class="form-control" id="search-input" name="q" placeholder="Search this book..." spellcheck="false" type="search"/>
<span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
</div>
<div class="pst-async-banner-revealer d-none">
<aside aria-label="Version warning" class="d-none d-print-none" id="bd-header-version-warning"></aside>
</div>
<aside aria-label="Announcement" class="bd-header-announcement">
<div class="bd-header-announcement__content">New marimo course available: <a href="https://byucamacholab.github.io/Photonics-Bootcamp/next/">/next/</a></div>
</aside>
<header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
</header>
<div class="bd-container">
<div class="bd-container__inner bd-page-width">
<div class="bd-sidebar-primary bd-sidebar">
<div class="sidebar-header-items sidebar-primary__section">
</div>
<div class="sidebar-primary-items__start sidebar-primary__section">
<div class="sidebar-primary-item">
<a class="navbar-brand logo" href="../index.html">
<img alt="CamachoLab Photonics Bootcamp - Home" class="logo__image only-light" src="../_static/logo.png"/>
<script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="CamachoLab Photonics Bootcamp - Home"/>`);</script>
</a></div>
<div class="sidebar-primary-item"><nav aria-label="Main" class="bd-links" id="bd-docs-nav">
<div class="bd-toc-item navbar-nav active">
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Front Matter</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Development Environment</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="open_source.html">Open source software</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="software.html">Software</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="wsl.html">WSL (Windows-only)</a></li>
<li class="toctree-l2"><a class="reference internal" href="vscode.html">Visual Studio Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="git_and_github.html">Git (and GitHub)</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="klayout.html">KLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="laboratory_tools.html">Laboratory Tools</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Passive Device Design and Simulation</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="photonic_devices.html">What are photonic devices?</a></li>
<li class="toctree-l1"><a class="reference internal" href="layer_stack.html">Defining the layer stack</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="components.html">Components</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="gds_to_meep.html">GDS to Meep</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="waveguides.html">Waveguides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="waveguides_tir.html">Total Internal Reflection</a></li>
<li class="toctree-l2"><a class="reference internal" href="waveguides_polarization.html">Polarization</a></li>
<li class="toctree-l2"><a class="reference internal" href="ray_optic_model.html">Improving the Ray-optic Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="waveguides_modelling.html">Modelling Wavegudies</a></li>
<li class="toctree-l2"><a class="reference internal" href="waveguides_mode_solvers.html">Waveguide modes</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="passive_components.html">Passive Components</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Directional couplers</a></li>
<li class="toctree-l2"><a class="reference internal" href="y_branch.html">Y-Branches</a></li>
<li class="toctree-l2"><a class="reference internal" href="ring_resonators.html">Ring Resonators</a></li>
<li class="toctree-l2"><a class="reference internal" href="mmis.html">Multimode Interferometers (MMIs)</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="optical_io.html">Optical I/O</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="grating_couplers.html">Grating couplers</a></li>
<li class="toctree-l2"><a class="reference internal" href="edge_couplers.html">Edge couplers</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="optimization.html">Optimization and inverse design</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="shape_optimization.html">Shape optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="adjoint_optimization.html">Adjoint optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="meep_to_gds.html">Meep to GDS</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="compact_models.html">Compact models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="scattering_parameters.html">Scattering parameters</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="drc.html">Design rule checks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Circuit Design and Simulation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="pdks.html">Process design kits</a></li>
<li class="toctree-l1"><a class="reference internal" href="mzi.html">Mach-Zehnder interferometers</a></li>
<li class="toctree-l1"><a class="reference internal" href="mzi_layout.html">Laying out a Mach-Zehnder Interferometer</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout_demo.html">Layout Demo</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Active Device Design and Simulation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="advanced_components.html">Advanced Components</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="phase_shifters.html">Phase Shifters</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="phase_shifters_heaters.html">Heaters</a></li>
<li class="toctree-l2"><a class="reference internal" href="phase_shifters_pn.html">PN and PIN Junctions</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Testing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="analyzing_circuits.html">Analyzing circuits</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">References</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/BYUCamachoLab/sky130ph">Repository</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/BYUCamachoLab/sky130ph/docs">PDK Documentation</a></li>
</ul>
</div>
</nav></div>
</div>
<div class="sidebar-primary-items__end sidebar-primary__section">
</div>
<div id="rtd-footer-container"></div>
</div>
<main class="bd-main" id="main-content" role="main">
<div class="sbt-scroll-pixel-helper"></div>
<div class="bd-content">
<div class="bd-article-container">
<div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
<div class="header-article-items__start">
<div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" data-bs-placement="bottom" data-bs-toggle="tooltip" for="__primary" title="Toggle primary sidebar">
<span class="fa-solid fa-bars"></span>
</label></div>
</div>
<div class="header-article-items__end">
<div class="header-article-item">
<div class="article-header-buttons">
<div class="dropdown dropdown-launch-buttons">
<button aria-expanded="false" aria-label="Launch interactive content" class="btn dropdown-toggle" data-bs-toggle="dropdown" type="button">
<i class="fas fa-rocket"></i>
</button>
<ul class="dropdown-menu">
<li><a class="btn btn-sm dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="https://mybinder.org/v2/gh/BYUCamachoLab/Photonics-Bootcamp/main?urlpath=tree/book/pages/directional_couplers.ipynb" target="_blank" title="Launch onBinder">
<span class="btn__icon-container">
<img src="../_static/images/logo_binder.svg"/>
</span>
<span class="btn__text-container">Binder</span>
</a>
</li>
<li><a class="btn btn-sm dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="https://colab.research.google.com/github/BYUCamachoLab/Photonics-Bootcamp/blob/main/book/pages/directional_couplers.ipynb" target="_blank" title="Launch onColab">
<span class="btn__icon-container">
<img src="../_static/images/logo_colab.png"/>
</span>
<span class="btn__text-container">Colab</span>
</a>
</li>
</ul>
</div>
<div class="dropdown dropdown-source-buttons">
<button aria-expanded="false" aria-label="Source repositories" class="btn dropdown-toggle" data-bs-toggle="dropdown" type="button">
<i class="fab fa-github"></i>
</button>
<ul class="dropdown-menu">
<li><a class="btn btn-sm btn-source-repository-button dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="https://github.com/BYUCamachoLab/Photonics-Bootcamp" target="_blank" title="Source repository">
<span class="btn__icon-container">
<i class="fab fa-github"></i>
</span>
<span class="btn__text-container">Repository</span>
</a>
</li>
<li><a class="btn btn-sm btn-source-edit-button dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="https://github.com/BYUCamachoLab/Photonics-Bootcamp/edit/main/book/pages/directional_couplers.ipynb" target="_blank" title="Suggest edit">
<span class="btn__icon-container">
<i class="fas fa-pencil-alt"></i>
</span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
<li><a class="btn btn-sm btn-source-issues-button dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="https://github.com/BYUCamachoLab/Photonics-Bootcamp/issues/new?title=Issue%20on%20page%20%2Fpages/directional_couplers.html&amp;body=Your%20issue%20content%20here." target="_blank" title="Open an issue">
<span class="btn__icon-container">
<i class="fas fa-lightbulb"></i>
</span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
</ul>
</div>
<div class="dropdown dropdown-download-buttons">
<button aria-expanded="false" aria-label="Download this page" class="btn dropdown-toggle" data-bs-toggle="dropdown" type="button">
<i class="fas fa-download"></i>
</button>
<ul class="dropdown-menu">
<li><a class="btn btn-sm btn-download-source-button dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" href="../_sources/pages/directional_couplers.ipynb" target="_blank" title="Download source file">
<span class="btn__icon-container">
<i class="fas fa-file"></i>
</span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
<li>
<button class="btn btn-sm btn-download-pdf-button dropdown-item" data-bs-placement="left" data-bs-toggle="tooltip" onclick="window.print()" title="Print to PDF">
<span class="btn__icon-container">
<i class="fas fa-file-pdf"></i>
</span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
</ul>
</div>
<button class="btn btn-sm btn-fullscreen-button" data-bs-placement="bottom" data-bs-toggle="tooltip" onclick="toggleFullScreen()" title="Fullscreen mode">
<span class="btn__icon-container">
<i class="fas fa-expand"></i>
</span>
</button>
<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>
<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" data-bs-placement="bottom" data-bs-toggle="tooltip" for="__secondary" title="Toggle secondary sidebar">
<span class="fa-solid fa-list"></span>
</label>
</div></div>
</div>
</div>
</div>
<div class="onlyprint" id="jb-print-docs-body">
<h1>Directional couplers</h1>
<!-- Table of contents -->
<div id="print-main-content">
<div id="jb-print-toc">
<div>
<h2> Contents </h2>
</div>
<nav aria-label="Page">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#supermodes">Supermodes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-supermodes">Visualizing supermodes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#coupling">Coupling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coupling-length-and-the-gap-between-waveguides">Coupling length and the gap between waveguides</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-splitting-ratios">Other splitting ratios</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-to-show-coupling-across-a-dc">Simulation to show coupling across a DC</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#design-considerations">Design considerations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sources">Sources</a></li>
</ul>
</nav>
</div>
</div>
</div>
<div id="searchbox"></div>
<article class="bd-article">
<section class="tex2jax_ignore mathjax_ignore" id="directional-couplers">
<h1>Directional couplers<a class="headerlink" href="#directional-couplers" title="Permalink to this heading">#</a></h1>
<p>Directional couplers are two waveguides with a small gap between them that “couple,” or transfer, light from one waveguide to another. The term “coupling” comes from multiple eigenmodes of a waveguide interacting with light, resulting in light being transferred between the modes. Small parts of waveguide modes’ electric fields are outside the waveguide, these are called evanescent fields (you can read about them more <a class="reference external" href="https://en.wikipedia.org/wiki/Evanescent_field">here</a>). When the evanescent field of a waveguide mode overlap with a second waveguide, some of the light is transferred between the modes as the light propagates. This effect can be used to split or combine light in photonic circuits. The amount of light transferred depends on several things:</p>
<ul class="simple">
<li><p>coupling length: the length of the region where the waveguides are close enough for their modes to overlap</p></li>
<li><p>phase of the incident light</p></li>
<li><p>coupler gap: the distance between the waveguides</p></li>
<li><p>waveguide geometry and material</p></li>
<li><p>wavelength of the light</p></li>
</ul>
<div style="text-align: center;">
<p><img alt="dir_cplr" src="https://github.com/BYUCamachoLab/Photonics-Bootcamp/blob/main/book/images/Notebook_Images/dir_cplr.png?raw=true"/></p>
</div>
<p style="text-align: center;"> Layout of a directional coupler in gdsfactory </p><p>Directional couplers can be designed to produce any ratio of power at the outputs, e.g. 50/50, 75/25, or even a 100/0 split where all the input power in one waveguide is coupled to the other. The fraction of power that is coupled from one waveguide to another is dependent on geometric parameters and can be described as:</p>
<div class="math notranslate nohighlight">
\[ \kappa ^2 = \frac {P_{\text{cross}}}{P_0} = \sin^2(CL)\]</div>
<p>Where <span class="math notranslate nohighlight">\(\kappa\)</span> is the field coupling, <span class="math notranslate nohighlight">\(P_{\text{cross}}\)</span> is the coupled power, <span class="math notranslate nohighlight">\(P_0\)</span> is the input power, <span class="math notranslate nohighlight">\(C\)</span> is the coupling coefficient, and <span class="math notranslate nohighlight">\(L\)</span> is the length of the coupler.</p>
<p>The coupling coefficient is found with supermode analysis.</p>
<section id="supermodes">
<h2>Supermodes<a class="headerlink" href="#supermodes" title="Permalink to this heading">#</a></h2>
<p>Just like there are modes that exist in one waveguide, supermodes are modes that exist in multiple waveguides based on the interactions between them. These modes interact with each other and the combination of these interactions determines how light propagates in the specific waveguide system.</p>
<p>An “odd”/antisymmetric, supermode occurs when light in the two waveguides are <span class="math notranslate nohighlight">\(180^\circ\)</span> out of phase. Similarly, an even/symmetric, supermode occurs when the light in the two waveguides is in phase.</p>
<section id="visualizing-supermodes">
<h3>Visualizing supermodes<a class="headerlink" href="#visualizing-supermodes" title="Permalink to this heading">#</a></h3>
<p>GDSFactory has a function that enables users to find the supermodes in a directional coupler, given the gap and permittivity of the waveguide core and cladding. Use the script below to visualize supermodes and their refractive indices. Change the gap value to see how the refractive indices of the even and odd mode change relative to each other as it increases or decreases. Also, notice how the electric field for an even mode is most intense between the waveguides, while for an odd field, the field is most intense inside of the waveguides.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">gplugins.modes</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gm</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">modes</span> <span class="o">=</span> <span class="n">gm</span><span class="o">.</span><span class="n">find_modes_coupler</span><span class="p">(</span>
    <span class="n">core_widths</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
    <span class="n">gaps</span><span class="o">=</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,),</span> <span class="c1"># CHANGE GAP VALUE</span>
    <span class="n">core_material</span><span class="o">=</span><span class="mf">3.45</span><span class="p">,</span>
    <span class="n">clad_material</span><span class="o">=</span><span class="mf">1.45</span><span class="p">,</span>
    <span class="n">core_thickness</span><span class="o">=</span><span class="mf">0.22</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
    <span class="n">sz</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
    <span class="n">nmodes</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">m1</span> <span class="o">=</span> <span class="n">modes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># even mode</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">modes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># odd mode</span>

<span class="c1"># Look to see how big of a difference there is between the two refractive indices</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Refractive index of even mode:"</span><span class="p">,</span> <span class="n">m1</span><span class="o">.</span><span class="n">neff</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Refractive index of odd mode:"</span><span class="p">,</span> <span class="n">m2</span><span class="o">.</span><span class="n">neff</span><span class="p">)</span>

<span class="c1"># Plot the dielectric, shows index of refraction values in sidebar</span>
<span class="n">m1</span><span class="o">.</span><span class="n">plot_eps</span><span class="p">()</span>

<span class="c1"># Plot the Electric field intensity of the modes</span>
<span class="n">m1</span><span class="o">.</span><span class="n">plot_ey</span><span class="p">()</span>
<span class="n">m2</span><span class="o">.</span><span class="n">plot_ey</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/947edb0506ac19801dd97565ee8f201796a33144402b9635cb44f6f1359b451c.png" src="../_images/947edb0506ac19801dd97565ee8f201796a33144402b9635cb44f6f1359b451c.png">
<img alt="../_images/a4249cc44950953a9618bd0a532d66e4d77d159c058357bf464e8fb6eb2d5817.png" src="../_images/a4249cc44950953a9618bd0a532d66e4d77d159c058357bf464e8fb6eb2d5817.png"/>
<img alt="../_images/b20d3d362497f4838b2487b324d1827c8124fc8393deb6973142ff286b89aeda.png" src="../_images/b20d3d362497f4838b2487b324d1827c8124fc8393deb6973142ff286b89aeda.png"/>
</img></div>
</div>
</section>
</section>
<section id="coupling">
<h2>Coupling<a class="headerlink" href="#coupling" title="Permalink to this heading">#</a></h2>
<p>The two supermodes that are used to find the coupling coefficient are the first two modes (like we found in the script above), which happen to be an even and odd mode, respectively.</p>
<p>The coupling coefficient to determine the desired coupling length for a directional coupler is found by:</p>
<div class="math notranslate nohighlight" id="equation-coupling-coefficient">
<span class="eqno">(1)<a class="headerlink" href="#equation-coupling-coefficient" title="Permalink to this equation">#</a></span>\[
C = \frac{\pi\Delta n}{\lambda}
\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[
\Delta n = |n_{1} - n_{2}| = |n_{\text{eff,even}} - n_{\text{eff,odd}}|
\]</div>
<p>The effective indices of the even and odd modes depend on</p>
<ul class="simple">
<li><p>the coupler gap</p></li>
<li><p>the wavelength of light</p></li>
<li><p>the waveguide geometry and material</p></li>
</ul>
<section id="coupling-length-and-the-gap-between-waveguides">
<h3>Coupling length and the gap between waveguides<a class="headerlink" href="#coupling-length-and-the-gap-between-waveguides" title="Permalink to this heading">#</a></h3>
<p>There is a function, <code class="docutils literal notranslate"><span class="pre">find_coupling_vs_gap</span></code>, in gdsfactory that allows you to find the coupling length (or crossover length) given the gap. It outputs a table detailing the gap width, even and odd mode refractive indices (ne and no, respectively), the coupling length in units of <span class="math notranslate nohighlight">\(\mu m\)</span> (lc), and the difference between ne and no, <span class="math notranslate nohighlight">\(\Delta n\)</span> (dn).</p>
<p>From the table, you should also be able to see that there is an exponential relationship between the gap and the coupling:</p>
<div class="math notranslate nohighlight">
\[C = B\cdot e^{-A \cdot g}\]</div>
<p><span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> are dependent on various parameters of the directional coupler, such as the geometry and the wavelength at which it is being operated.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">meep</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mp</span>
<span class="n">gm</span><span class="o">.</span><span class="n">find_coupling_vs_gap</span><span class="p">(</span><span class="n">gap1</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                        <span class="n">gap2</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
                        <span class="n">steps</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span>
                        <span class="n">nmodes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                        <span class="n">wavelength</span><span class="o">=</span><span class="mf">1.55</span><span class="p">,</span>
                        <span class="n">parity</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">EVEN_Y</span><span class="p">,</span>
                        <span class="n">core_widths</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
                        <span class="n">core_material</span><span class="o">=</span><span class="mf">3.45</span><span class="p">,</span>
                        <span class="n">clad_material</span><span class="o">=</span><span class="mf">1.45</span><span class="p">,</span>
                        <span class="n">core_thickness</span><span class="o">=</span><span class="mf">0.22</span><span class="p">,</span>
                        <span class="n">resolution</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
                        <span class="n">sz</span><span class="o">=</span><span class="mi">6</span><span class="p">,)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "6096fc914dc8466db5b23fb64d0ed5db", "version_major": 2, "version_minor": 0}</script><div class="output text_html"><div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>gap</th>
<th>ne</th>
<th>no</th>
<th>lc</th>
<th>dn</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>0.10</td>
<td>2.463631</td>
<td>2.409798</td>
<td>14.396530</td>
<td>0.053832</td>
</tr>
<tr>
<th>1</th>
<td>0.11</td>
<td>2.460647</td>
<td>2.410682</td>
<td>15.510925</td>
<td>0.049965</td>
</tr>
<tr>
<th>2</th>
<td>0.12</td>
<td>2.459734</td>
<td>2.411797</td>
<td>16.166968</td>
<td>0.047937</td>
</tr>
<tr>
<th>3</th>
<td>0.13</td>
<td>2.452682</td>
<td>2.411449</td>
<td>18.795515</td>
<td>0.041233</td>
</tr>
<tr>
<th>4</th>
<td>0.14</td>
<td>2.448745</td>
<td>2.412270</td>
<td>21.247526</td>
<td>0.036475</td>
</tr>
<tr>
<th>5</th>
<td>0.15</td>
<td>2.447691</td>
<td>2.414688</td>
<td>23.482841</td>
<td>0.033003</td>
</tr>
<tr>
<th>6</th>
<td>0.16</td>
<td>2.447658</td>
<td>2.416929</td>
<td>25.220085</td>
<td>0.030729</td>
</tr>
<tr>
<th>7</th>
<td>0.17</td>
<td>2.447685</td>
<td>2.418000</td>
<td>26.107513</td>
<td>0.029685</td>
</tr>
<tr>
<th>8</th>
<td>0.18</td>
<td>2.442283</td>
<td>2.416295</td>
<td>29.821729</td>
<td>0.025988</td>
</tr>
<tr>
<th>9</th>
<td>0.19</td>
<td>2.439496</td>
<td>2.416231</td>
<td>33.311196</td>
<td>0.023265</td>
</tr>
<tr>
<th>10</th>
<td>0.20</td>
<td>2.438256</td>
<td>2.417123</td>
<td>36.672851</td>
<td>0.021133</td>
</tr>
</tbody>
</table>
</div></div></div>
</div>
<p>As seen above, each supermode has its own effective index (<span class="math notranslate nohighlight">\(n_{\text{eff,even}}\)</span>, <span class="math notranslate nohighlight">\(n_{\text{eff,odd}}\)</span>) that differs from that of the normal mode in the waveguide and is dependent of the gap between the waveguides. <span class="math notranslate nohighlight">\(n_{\text{eff,even}}\)</span> increases as the gap decreases, and <span class="math notranslate nohighlight">\(n_{\text{eff,odd}}\)</span> decreases as the gap decreases. The different effective indices also mean that the two modes have different propagation constants.</p>
<p>The propagation constant is</p>
<div class="math notranslate nohighlight">
\[
\beta = \frac{2 \pi n_{\text{eff}}}{\lambda}
\]</div>
<p>Because of this difference in propagation constants, the modes travel at different speeds down the waveguide and so the field intensity oscillates between the two waveguides. This is called beating. One beat is equivalent to the coupling length, or cross-over length, and it is the length it takes for all of the power from one waveguide to be coupled into the other. As the gap between the waveguides gets smaller, the beating gets faster since <span class="math notranslate nohighlight">\(\Delta n\)</span> gets larger, making the cross-over length shorter.</p>
<p>This cross-over length <span class="math notranslate nohighlight">\(L\)</span>, that gives 100% power transfer is found with:</p>
<div class="amsmath math notranslate nohighlight" id="equation-2e319597-66be-453b-abd5-ac5f96c02818">
<span class="eqno">(2)<a class="headerlink" href="#equation-2e319597-66be-453b-abd5-ac5f96c02818" title="Permalink to this equation">#</a></span>\[\begin{align}
L_{\text{cross-over}} = \frac {\lambda}{2\Delta n} \nonumber
\end{align}\]</div>
<p>This is found from determining what length when multiplied by the propagation constants makes the phase difference <span class="math notranslate nohighlight">\(\pi\)</span>:</p>
<div class="math notranslate nohighlight">
\[
\beta _1 L_x - \beta _2 L_x = \pi
\]</div>
<div class="math notranslate nohighlight">
\[
L_x \left[\frac{2 \pi n_1}{\lambda} - \frac{2 \pi n_2}{\lambda}\right]  = \pi
\]</div>
</section>
<section id="other-splitting-ratios">
<h3>Other splitting ratios<a class="headerlink" href="#other-splitting-ratios" title="Permalink to this heading">#</a></h3>
<p>Of course, there are many applications for directional couplers that don’t require a complete transfer of power from one waveguide to another. Oftentimes a different splitting ratio is desired, such as a 50/50 or 60/40 ratio. In such cases, you can find the power that one waveguide receives from the other with the equation:</p>
<div class="math notranslate nohighlight">
\[
P_{\text{cross}}(L) = P_{\text{initial}}\sin^2 \left( \frac{\pi\Delta n}{\lambda}L \right)
\]</div>
</section>
</section>
<section id="simulation-to-show-coupling-across-a-dc">
<h2>Simulation to show coupling across a DC<a class="headerlink" href="#simulation-to-show-coupling-across-a-dc" title="Permalink to this heading">#</a></h2>
<p>To further explore how electric field intensity oscillates between two waveguides close together, we simulate the coupling process in meep. We send light into one of the waveguides and plot the electric field intensity over time in the waveguides. We recommend changing the gap width in the script and seeing how it affects the cross-over length. The simulation may take a couple minutes to run depending on the waveguide lengths. The plot of the simulation setup and the output GIF showing the field intensities is shown below. This gap is much smaller than is typically used in practice so the cross-over length is shorter so the simulation runs faster.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">meep</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mp</span>

<span class="c1"># Define materials</span>
<span class="n">Si</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Medium</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mf">3.45</span><span class="p">)</span>
<span class="n">SiO2</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Medium</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mf">1.45</span><span class="p">)</span>

<span class="c1"># Define wavelength in um</span>
<span class="n">wvl</span> <span class="o">=</span> <span class="mf">1.55</span>


<span class="c1"># # Define cell and geometric parameters</span>
<span class="n">resolution</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">wg_width</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">dpml</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">pad</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="c1">## CHANGE GAP DISTANCE ##</span>
<span class="n">gap</span> <span class="o">=</span> <span class="mf">0.07</span>
<span class="c1">## CHANGE WAVEGUIDE LENGTH ##</span>
<span class="n">Lx</span> <span class="o">=</span> <span class="mi">30</span>

<span class="n">Sx</span> <span class="o">=</span> <span class="n">dpml</span> <span class="o">+</span> <span class="n">Lx</span> <span class="o">+</span> <span class="n">dpml</span>
<span class="n">Sy</span> <span class="o">=</span> <span class="n">dpml</span> <span class="o">+</span> <span class="n">pad</span> <span class="o">+</span> <span class="n">wg_width</span> <span class="o">+</span> <span class="n">gap</span> <span class="o">+</span> <span class="n">wg_width</span> <span class="o">+</span> <span class="n">pad</span> <span class="o">+</span> <span class="n">dpml</span>
<span class="n">wg_center_y</span> <span class="o">=</span> <span class="n">gap</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">wg_width</span><span class="o">/</span><span class="mi">2</span>

<span class="c1"># Add PML (perfectly matched layers)</span>
<span class="n">pml</span> <span class="o">=</span> <span class="p">[</span><span class="n">mp</span><span class="o">.</span><span class="n">PML</span><span class="p">(</span><span class="n">dpml</span><span class="p">)]</span>

<span class="c1"># Create 2 infinitely long parallel waveguides</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="p">[</span><span class="n">mp</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="n">Sx</span><span class="p">,</span><span class="n">Sy</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">center</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(),</span> <span class="n">material</span><span class="o">=</span><span class="n">SiO2</span><span class="p">),</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="n">Sx</span><span class="p">,</span><span class="n">wg_width</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">center</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wg_center_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">material</span><span class="o">=</span><span class="n">Si</span><span class="p">),</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="n">Sx</span><span class="p">,</span><span class="n">wg_width</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">center</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">wg_center_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">material</span><span class="o">=</span><span class="n">Si</span><span class="p">),</span>
            <span class="p">]</span>

<span class="c1"># Put a pulse Eigenmode source at beginning of one waveguide</span>
<span class="n">fcen</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">wvl</span>
<span class="n">width</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">fwidth</span> <span class="o">=</span> <span class="n">width</span> <span class="o">*</span> <span class="n">fcen</span>
<span class="n">src</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">GaussianSource</span><span class="p">(</span><span class="n">frequency</span><span class="o">=</span><span class="n">fcen</span><span class="p">,</span> <span class="n">fwidth</span><span class="o">=</span><span class="n">fwidth</span><span class="p">)</span>
<span class="n">source</span> <span class="o">=</span> <span class="p">[</span><span class="n">mp</span><span class="o">.</span><span class="n">EigenModeSource</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">src</span><span class="p">,</span> <span class="n">eig_band</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">eig_kpoint</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">size</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">gap</span><span class="o">+</span><span class="n">wg_width</span><span class="p">),</span>
        <span class="n">center</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="o">-</span><span class="n">Sx</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">dpml</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="n">wg_center_y</span><span class="p">))</span>
        <span class="p">]</span>

<span class="c1"># Simulation object</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span>
    <span class="n">cell_size</span><span class="o">=</span><span class="n">mp</span><span class="o">.</span><span class="n">Vector3</span><span class="p">(</span><span class="n">Sx</span><span class="p">,</span> <span class="n">Sy</span><span class="p">),</span>
    <span class="n">boundary_layers</span><span class="o">=</span><span class="n">pml</span><span class="p">,</span>
    <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
    <span class="n">sources</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
    <span class="n">default_material</span><span class="o">=</span><span class="n">SiO2</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Show simulation set-up</span>
<span class="n">sim</span><span class="o">.</span><span class="n">plot2D</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning: grid volume is not an integer number of pixels; cell size will be rounded to nearest pixel.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel='X', ylabel='Y'&gt;
</pre></div>
</div>
<img alt="../_images/2d2827693ae3c5832968e19f2d10e21b06e357cebd4fd7aef5c68a78692dd5c1.png" src="../_images/2d2827693ae3c5832968e19f2d10e21b06e357cebd4fd7aef5c68a78692dd5c1.png"/>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">glob</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="n">sim</span><span class="o">.</span><span class="n">reset_meep</span><span class="p">()</span>
<span class="c1"># Capture electric field intensity over time and output into a gif</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">at_beginning</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">output_epsilon</span><span class="p">),</span>
        <span class="n">mp</span><span class="o">.</span><span class="n">to_appended</span><span class="p">(</span><span class="s2">"ez"</span><span class="p">,</span> <span class="n">mp</span><span class="o">.</span><span class="n">at_every</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">mp</span><span class="o">.</span><span class="n">output_efield_z</span><span class="p">)),</span>
        <span class="n">until</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="c1"># Generate pngs from the simulation output</span>
<span class="c1"># This line assumes that colormaps are working, </span>
<span class="c1"># you are in the same directory as the output files, </span>
<span class="c1"># and that h5py is installed</span>
<span class="c1"># If you have a problem with h5utils, see note below</span>
<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">"h5topng -t 0:99 -R -Zc RdBu -A eps-000000.00.h5 -a gray ez.h5"</span><span class="p">)</span>

<span class="c1"># Create a gif from the pngs</span>
<span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">imgs</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">"ez.t*"</span><span class="p">)</span>
<span class="n">imgs</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">imgs</span><span class="p">:</span>
    <span class="n">new_frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_frame</span><span class="p">)</span>

<span class="c1"># Save into a GIF file that loops forever</span>
<span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">'ez.gif'</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">'GIF'</span><span class="p">,</span>
               <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
               <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Clean up workspace by deleting all generated images</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">imgs</span><span class="p">:</span> 
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">"*.h5"</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning: grid volume is not an integer number of pixels; cell size will be rounded to nearest pixel.
Warning: grid volume is not an integer number of pixels; cell size will be rounded to nearest pixel.
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "e4d1efca4daf4a43a2d2a988a083811a", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p><strong>Note on h5utils:</strong>
Sometimes the colormaps in h5utils are invalid when used with Meep. To circumvent this issue, specify the path to your desired colormap using:</p>
<p><code class="docutils literal notranslate"><span class="pre">(path</span> <span class="pre">to</span> <span class="pre">h5utils)/h5utils/share/h5utils/colormaps/(desired</span> <span class="pre">colormap)</span></code></p>
<p>Image of the simulation set-up:</p>
<div style="text-align: center;">
<p><img alt="set-up" src="https://github.com/BYUCamachoLab/Photonics-Bootcamp/blob/main/book/images/Notebook_Images/dircplr_sim_setup.png?raw=true"/></p>
</div>
<p>Gif from the meep simulation with a gap of <span class="math notranslate nohighlight">\(0.2 \mu m\)</span>:</p>
<div style="text-align: center;">
<p><img alt="gif" src="https://github.com/BYUCamachoLab/Photonics-Bootcamp/blob/main/book/images/Notebook_Images/dircplr_ez.gif?raw=true"/></p>
</div></section>
<section id="design-considerations">
<h2>Design considerations<a class="headerlink" href="#design-considerations" title="Permalink to this heading">#</a></h2>
<p>When designing a directional coupler, the length and gap must be chosen to produce the desired power splitting ratio at the output. Directional couplers are also sensitive to fabrication variations, so the length and gap should be chosen to be robust to these variations.</p>
<p>Another element to consider is that the principles behind directional coupling can interfere with nearby circuit components on the chip. Parasitic coupling occurs when two waveguides that are not part of a directional coupler are placed too close to each other, leading to power “leaking” between them. Waveguides and components should be placed far enough away so this does not happen.</p>
</section>
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">#</a></h2>
<p>How far apart should two <span class="math notranslate nohighlight">\(0.5\mu m\)</span> x <span class="math notranslate nohighlight">\(0.22 \mu m\)</span> silicon waveguides be to have a coupling length of <span class="math notranslate nohighlight">\(20 \mu m\)</span>?</p>
<details>
<summary>Answer</summary>
    Approximately 0.135 microns. 
</details></section>
<section id="sources">
<h2>Sources<a class="headerlink" href="#sources" title="Permalink to this heading">#</a></h2>
<p>“Silicon Photonics Design” by Lukas Chrostowski</p>
<p>“Photonic Components: Directional Coupler” by Stefan Preble</p>
</section>
</section>
<script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./pages"
        },
        predefinedOutput: true
    }
    </script>
<script>kernelName = 'python3'</script>
</article>
<footer class="prev-next-footer d-print-none">
<div class="prev-next-area">
<a class="left-prev" href="passive_components.html" title="previous page">
<i class="fa-solid fa-angle-left"></i>
<div class="prev-next-info">
<p class="prev-next-subtitle">previous</p>
<p class="prev-next-title">Passive Components</p>
</div>
</a>
<a class="right-next" href="y_branch.html" title="next page">
<div class="prev-next-info">
<p class="prev-next-subtitle">next</p>
<p class="prev-next-title">Y-Branches</p>
</div>
<i class="fa-solid fa-angle-right"></i>
</a>
</div>
</footer>
</div>
<div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">
<div class="sidebar-secondary-item">
<div class="page-toc tocsection onthispage">
<i class="fa-solid fa-list"></i> Contents
  </div>
<nav class="bd-toc-nav page-toc">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#supermodes">Supermodes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-supermodes">Visualizing supermodes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#coupling">Coupling</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coupling-length-and-the-gap-between-waveguides">Coupling length and the gap between waveguides</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-splitting-ratios">Other splitting ratios</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-to-show-coupling-across-a-dc">Simulation to show coupling across a DC</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#design-considerations">Design considerations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sources">Sources</a></li>
</ul>
</nav></div>
</div></div>
</div>
<footer class="bd-footer-content">
<div class="bd-footer-content__inner container">
<div class="footer-item">
<p class="component-author">
By CamachoLab and Google
</p>
</div>
<div class="footer-item">
<p class="copyright">
    
      © Copyright 2023.
      <br/>
</p>
</div>
<div class="footer-item">
</div>
<div class="footer-item">
</div>
</div>
</footer>
</main>
</div>
</div>
<!-- Scripts loaded after <body> so the DOM is not blocked -->
<script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>
<footer class="bd-footer">
</footer>
<script src="../_static/scripts/chattutor.config.js"></script><script src="../_static/scripts/chattutor.min.js" type="module"></script></body>
</html>